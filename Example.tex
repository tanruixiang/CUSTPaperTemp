%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 文件:     f:\CUSTPaper\test.tex
% 项目:     f:\CUSTPaper
% 创建时间: Thursday, April 25th 2019, 12:27:01 am
% 创作者: ElonH
% --------------------
% 最后修改时间: Sun May 19 2019
% 修改者: ElonH
% ----------------------------------------
% MIT License
% 
% Copyright (c) 2019 ElonH
% 
% Permission is hereby granted, free of charge, to any person obtaining a copy of
% this software and associated documentation files (the "Software"), to deal in
% the Software without restriction, including without limitation the rights to
% use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
% of the Software, and to permit persons to whom the Software is furnished to do
% so, subject to the following conditions:
% 
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
% 
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.
% ----------------------------------------
% 更改日志:
% 日期       	说明
% -----------	------------------------------------
% 2019/05/19	摘要格式修正及添加提示
% 2019/05/19	附录图片和表格引用格式
% 2019/05/19	附录公式引用格式
% 2019/05/10	多引用
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass{CustGraduPaper}
\usepackage{lipsum}
\usepackage{bm,tikz}
\usepackage{listings}
\usetikzlibrary{shapes,arrows,shadows,calc}

\begin{document}
\cntitle{毕业论文中文题目}
\entitle{The Subject of Graduation Project}
\author{姓名}
\department{专业}
\stunum{23333}
\instructor{指导老师}
\academy{学院}
% \date{时间} %默认当前年份和月份
\makecover
\makestatement

\begin{cnabstract}{关键词1\quad 关键词2\quad 关键词3}%中文关键词之间不加标点符号，用2个空格(\quad)间隔，按词条的外延层次从大到小排列；
	这是一篇长春理工大学本科生毕业论文\LaTeX 模板?

	这是一篇长春理工大学本科生毕业论文\LaTeX 模板.

	这真的是一篇长春理工大学本科生毕业论文\LaTeX 模板?

	这确实是一篇长春理工大学本科生毕业论文\LaTeX 模板.
\end{cnabstract}
\begin{enabstract}{Word1; Word2; Word3;}%外文关键词应与中文关键词对应，各关键词之间用分号加空格(; )间隔。
	\lipsum[1]

	\lipsum[2]

	\lipsum[3]
\end{enabstract}


\makecontents % or \tableofcontents
\chapter{第一章标题}
这是小四号的正文字体，段间距1.5倍

通过空一行实现段落换行，仅仅是回车并不会产生新的段落
\par 也可以通过\verb|\par|命令来新起一段
\section{第一小节}
\subsection{第一小小节}
\subsubsection{第一小小小节}
\subsection{第二小小节}
\subsubsection{第二小小小节}\label{subsubsubsec:subsubsubsec}

\subsubsection{第四级标题}

\paragraph{段落}\label{para:para}这是一个带有顶头标签的段落这是一个带有顶头标签的段落这是一个带有顶头标签的段落这是一个带有顶头标签的段落这是一个带有顶头标签的段落这是一个带有顶头标签的段落这是一个带有顶头标签的段落
\subparagraph{小段落}\label{subpara:subpara}只是一个带有缩进标签的段落只是一个带有缩进标签的段落只是一个带有缩进标签的段落只是一个带有缩进标签的段落只是一个带有缩进标签的段落只是一个带有缩进标签的段落只是一个带有缩进标签的段落
\section{第二小节}
本模板已经引入伪加粗和伪斜体，这样就不需要对应的粗体和斜体字体也能生成需要的效果，就像下面这样

{\songti \bfseries 宋体加粗}

{\songti \itshape 宋体斜体}

{\songti \bfseries \itshape 宋体粗斜体}

请注意，使用加粗和斜体时，请与字体名称一同使用，否则会自动将粗体匹配为黑体，斜体匹配为楷体，就像下面这样

{正常显示宋体}

{\bfseries 加粗后变为黑体}

{\itshape 斜体后变为楷体}

\section{第三小节}
这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字这是一大段文字
\chapter{新的大节}
新的大节会自动出现在新的一页上
\chapter{参考文献和交叉引用}\label{ch:ref}
\section{参考文献}\label{sec:bibs}
这是一个参考文献引用的范例\cite{Stone_1998}，你可以随时使用两种不同的样式\cite{Stone_1998}或者\upcite{Stone_1998}

可以同时引用多个文献\cite{Stone_1998,9780124467422,huagongrenzheng2014}

这样可以添加一个不标注的参考文献引用\nocite{9787508342894}

多引用另一情况\cite{Stone_1998,9780124467422,bamboosilk}

这样可以添加所有bib文件中的参考文献\nocite{*}

参考文献使用了thebibliography，没有用原模板的bib生成，这样做方便直接复制黏贴对应格式的引用。但是这样会导致bibtex.exe的一些错误或者警告提示，无视就好(因为懒得改了，如果您有兴趣，可以更新扔github上)。

\subsection{交叉引用}\label{subsec:crossref}
本模板已经重写了hyperref宏包的\verb|\autoref|命令，方便引用章节、公式和图表。

比如说\autoref{ch:ref}、\autoref{sec:bibs}和\autoref{subsec:crossref}就引用了本章节，\autoref{para:para}和\autoref{subpara:subpara}引用了之前的两个段落。显然段落因为没有序号，引用结果和上一节的需要相同，因此建议使用段落“\nameref{para:para}”和段落“\nameref{subpara:subpara}”。

% 本样式定义的第四级标题也可以引用，就像这样：\autoref{subsubsubsec:subsubsubsec}。



\section{公式这么用}
在文中引用公式可以这么写：$a^2+b^2=c^2$这是勾股定理，他还可以表示为$c=\sqrt{a^2+b^2}$，还可以让公式单独一段并且加上编号
\begin{equation}
	\sin^2{\theta}+\cos^2{\theta}=1 \label{eq:pingfanghe}
\end{equation}
还可以通过添加标签在正文中引用公式，如式~\eqref{eq:pingfanghe}~或者\autoref{eq:pingfanghe}。我们还可以轻松打出一个矩阵
\begin{equation}
	\bm{A}=\begin{bmatrix}
		1  & 2  & 3  & 4  \\
		11 & 22 & 33 & 44 \\
	\end{bmatrix}
	\times\begin{bmatrix}
		22 & 24 \\
		32 & 34 \\
		42 & 44 \\
		52 & 54 \\
	\end{bmatrix}
\end{equation}
或者多个带编号的公式
\begin{eqnarray}
	f_1(x)=12x^2+36x+\sin x\\
	f_2(x)=\sqrt{3}{x^3+3x}
\end{eqnarray}
指定某个不带编号
\begin{flalign}
	f(x)=4x^2+5x^2 \nonumber\\
	=9x^2
\end{flalign}
对齐等号
\begin{flalign}
	f(x) & =4x^2+5x^2 \\
	& =9x^2
\end{flalign}
左边大括号
\begin{equation}
	\left\{
	\begin{array}{c}
		f(x)=\frac{log_2(3x^2)}{e^x} \\
		g(x)=\sqrt{3^{2x}}
	\end{array}
	\right.
\end{equation}
来个泰勒公式：
$$
	f(x)=\frac{f\left(x_{0}\right)}{0 !}+\frac{f^{\prime}\left(x_{0}\right)}{1 !}\left(x-x_{0}\right)+\frac{f^{\prime \prime}\left(x_{0}\right)}{2 !}\left(x-x_{0}\right)^{2}+\ldots+\frac{f^{(n)}\left(x_{0}\right)}{n !}\left(x-x_{0}\right)^{n}+R_{n}(x)
$$
Cauchy不等式：
$$
	\left(\int_{E}|f(x) g(x)| \mathrm{d} \mu\right)^{2} \leqslant \int_{E}|f(x)|^{2} \mathrm{d} \mu \int_{E}|g(x)|^{2} \mathrm{d} \mu
$$
麦克斯韦方程组：

\begin{flalign}
	\oint_{S} \mathbf{D} \cdot \mathrm{d} \mathbf{A}& =Q_{f, S} \\
	\oint_{S} \mathbf{B} \cdot \mathrm{d} \mathbf{A}& =0 \\
	\oint_{\partial S} \mathbf{E} \cdot \mathrm{d} \mathbf{l}& =-\frac{\partial \Phi_{B, S}}{\partial t} \\
	\oint_{\partial S} \mathbf{H} \cdot \mathrm{d} \mathbf{l}& =I_{f, s}+\frac{\partial \Phi_{D, S}}{\partial t}
\end{flalign}
对附录中的公式进行引用\autoref{eq:appendices}

以上
\[\frac{123}{2}\]

\chapter{用图和表的示例}
\chapter{代码块}
\section{代码块原样输出}
\begin{lstlisting}
print('hello world')
\end{lstlisting}

\lstset{
	columns=fixed,       
	numbers=left,                                        % 在左侧显示行号
	numberstyle=\tiny\color{gray},                       % 设定行号格式
	frame=none,                                          % 不显示背景边框
	backgroundcolor=\color[RGB]{245,245,244},            % 设定背景颜色
	keywordstyle=\color[RGB]{40,40,255},                 % 设定关键字颜色
	numberstyle=\footnotesize\color{darkgray},           
	commentstyle=\it\color[RGB]{0,96,96},                % 设置代码注释的格式
	stringstyle=\rmfamily\slshape\color[RGB]{128,0,0},   % 设置字符串格式
	showstringspaces=false,                              % 不显示字符串中的空格
	language=c++,                                        % 设置语言
	breaklines,%自动换行
	columns=flexible,%不随便添加空格,只在已经有空格的地方添加空格,
}
\begin{lstlisting}
// Keywords Search
// 网络流上流传最广的AC自动机模板题，问你目标串中出现了几个模式串
// 如果一个结点是单词末尾的话out标记为true,在search的时候对于每个结点都向fail指针找
// 找到out为true的就将其标记为false,且ans++
#include <cstdio>
#include <iostream>
#include <string.h>
using namespace std;
#define maxn 10000000
struct node
{
	int cnt;//是否为单词最后一个节点
	node *next[26],*fail;//Trie每个节点的26个子节点and失败指针
	node()
	{
		cnt=0;
		fail=NULL;
		for(int i=0; i<26; i++)
		next[i]=0;
	}
}*root;
node *q[maxn];//构造失败指针的bfs队列
char keyword[55];//输入单词,模式串
char str[1000010];//需要查找的主串
int head,tail;//队列头尾指针
void insert(char *s,node *p)//插入字符串函数
{
	int i=0,k;
	while(s[i])
	{
		k=s[i++]-'a';
		if(p->next[k]==NULL)
		p->next[k]=new node();
		p=p->next[k];//指针移动至下一层
	}
	p->cnt++;//单词结尾节点count + 1做标记
}
void build_AC(node *root)//构造失败指针
{
	head=0;
	tail=1;
	q[head]=root;
	node *temp,*p;
	while(head<tail)//bfs构造Trie树的失败指针
	{
		temp=q[head++];
		for(int i=0; i<26; i++)
		{
			if(temp->next[i])//判断实际存在的节点
			{
				// root下的第一层节点的失败指针都指向root
				if(temp==root)
				temp->next[i]->fail=root;
				else
				{
					//依次回溯该节点的父节点的失败指针
					//直到某节点的next[i]与该节点相同，则
					//把该节点的失败指针指向该next[i]节点
					//若回溯到 root 都没有找到,则该节点的失败指针 指向 root
					p=temp->fail;//temp 为节点的父指针
					while(p)
					{
						if(p->next[i])
						{
							temp->next[i]->fail=p->next[i];
							break;
						}
						p=p->fail;
					}
					if(!p)temp->next[i]->fail=root;
				}
				//每处理一个点,就把它的所有儿子加入队列
				//直到队列为空
				q[tail++]=temp->next[i];
			}
		}
	}
}
int query(char *str,node *root)
{
	int ans=0,k,len=strlen(str);
	node *p=root;
	//i为主串指针，p为匹配串指针
	for(int i=0; i<len; i++)
	{
		k=str[i]-'a';
		//由失败指针回溯寻找,判断str[i]是否存在于Trie树中
		while(!p->next[k]&&p!=root)
		p=p->fail;
		p=p->next[k];//找到后p指向该节点
		if(!p)p=root;//指针仍为空，则没有找到与之匹配的字符
		//指针重新回到根节点root,下次从root开始搜索Trie树
		node *temp=p;//匹配该节点后,沿其失败指针回溯,判断其他节点是否匹配
		while(temp!=root&&temp->cnt!=-1)//匹配结束控制and未被访问控制
		{
			ans+=temp->cnt;
			temp->cnt=-1;//标记已访问
			temp=temp->fail;//回溯失败指针继续寻找下一个满足条件的节点
		}
	}
	return ans;
}
void del(node *root)
{
	if(root==NULL)return ;
	for(int i=0;i<26;i++)del(root->next[i]);
	delete(root);
}
int main()
{
	int t,n;
	scanf("%d",&t);
	while(t--)
	{
		root=new node();
		scanf("%d",&n);
		for(int i=0; i<n; i++)
		{
			scanf(" %s",keyword);
			insert(keyword,root);
		}
		build_AC(root);
		scanf(" %s",str);
		printf("%d\n",query(str,root));
		del(root);
	}
}

\end{lstlisting}

\section{图的使用}
% \XeLaTeX 环境下可以使用EPS、PDF、PNG、JPEG、BMP格式的图片，当然也可以用绘图包直接在\LaTeX 中绘制图形，推荐使用宏包tikz。图的环境是figure，但figure环境使用复杂且不自带标题，因此本模板定义了一个通用版本的generalfig，该环境会将figure内的图片居中并设置标签与引用名，同时会让图片位置设置为所有可行位置（htbp，即此处、页顶、页底、独立一页），此选项可以作为可选参数设置。

其使用方法如下：

\begin{generalfig}[htb]{大数据信息处理框架}{fig:data}
	\includegraphics[width=\textwidth]{Figures/data.png}
\end{generalfig}

同时也可以引用该图片例如：\autoref{fig:data}。请注意generalfig第一个参数是标题，第二个参数是引用。

对附录上的图片引用\autoref{fig:tikz}
\newpage

\section{表的使用}
作为论文，推荐使用三线表进行排版。所谓三线表，即在标题前有横线，标题后有横线，表格最后还有横线，其他地方无线。当然这不是死规定，也可以根据需要在合适的地方加线。

本文定义了新的可变长度左中右（LCR）格式，LCR三个格式会根据表格宽度的设定自行控制宽度，且其宽度相等，方便设置和页面相同宽度的表格。但该功能需要使用tabularx做表。
\begin{generaltab}{某校学生升高体重样本}{tab:heightweight}
	\begin{tabularx}{\textwidth}{lCCC}
		\toprule
		序号 & 年龄 & 身高   & 体重  \\
		\midrule
		1    & 14   & 156    & 42    \\
		2    & 16   & 158    & 45    \\
		3    & 14   & 162    & 48    \\
		4    & 15   & 163    & 50    \\
		\cmidrule{2-4} %添加2-4列的中线
		平均 & 15   & 159.75 & 46.25 \\
		\bottomrule
	\end{tabularx}
\end{generaltab}

当然你也可以引用表格，就像这样：\autoref{tab:heightweight}。
引用附录表格\autoref{tab:LatexTableGenerator}

\section{列表的使用}
这是一个计数的列表
\begin{enumerate}
	\item 第一项
	      \begin{enumerate}
		      \item 第一项中的第一项
		      \item 第一项中的第二项
	      \end{enumerate}
	\item 第二项
	\item 第三项
\end{enumerate}

这是一个不计数的列表
\begin{itemize}
	\item 第一项
	      \begin{itemize}
		      \item 第一项中的第一项
		      \item 第一项中的第二项
	      \end{itemize}
	\item 第二项
	\item 第三项
\end{itemize}



\begin{thankpage}
	感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师

	感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师感谢老师
\end{thankpage}

%生成参考文献
%使用方法：\bibliography{参考文件1文件名, 参考文献2文件名, ...}
%\bibliography{Bibs/mybib}

%使用thebibliography原样输出
\begin{thebibliography}{1}%使用1参数左对齐
    \addcontentsline{toc}{chapter}{参考文献}%将“参考文献加入目录中”
    
	\bibitem{Stone_1998}Arandjelović R, Zisserman A, Three things everyone should know to improve object retrieval, Computer Vision and Pattern Recognition (CVPR), 2012 IEEE Conference on, IEEE, 2012: 2911-2918.  
	\bibitem{9780124467422}Philbin J, Chum O, Isard M, et al. Lost in quantization: Improving particular object retrieval in large scale image databases, Computer Vision and Pattern Recognition, 2008. CVPR 2008, IEEE Conference on, IEEE, 2008: 1-8.  	
	\bibitem{huagongrenzheng2014}王静康,张凤宝,夏淑倩,et al.论化工本科专业国际认证与国内认证的“实质性”[J].高等工程教育研究.2014,5:1-4

	\bibitem{bamboosilk}陈剑.上博简《民之父母》“而得既塞於四海矣”句解释[EB/OL].简帛研究网站.http://www.bamboosilk.org/Wssf/2003/chenjian03.htm
\end{thebibliography}

\begin{appendices}
	\chapter{第一个附录}
	这里是附录环境，其中的section、subsection、subsubsection已经变为附录的样式，并且会以这种样式加入目录中
	\section{附录可以有小节}
	\subsection{小小节}
	附录公式引用使用带圈数字
	\begin{equation}\label{eq:appendices}
		\nabla F = (
		\frac{\partial F}{\partial x},
		\frac{\partial F}{\partial y},
		\frac{\partial F}{\partial z})
	\end{equation}
	\subsubsection{附录中也可以有小小节}\label{apxsubsubsec:appendix}
	% \verb|\autoref|无法识别Appendices环境，引用效果和正文一样，如\autoref{apxsubsubsec:appendix}。所以如果引用附录的话，建议直接使用附录~\ref{apxsubsubsec:appendix}~。
	附录中的图片：
	\begin{generalfig}[htb]{Tikz画流程图}{fig:tikz}
		\begin{tikzpicture}[->,>=stealth,shorten >=1pt,auto,node distance=2.8cm,thick]
			\tikzstyle{every state}=[
			rounded corners,shape=rectangle,drop shadow,minimum height=2.5em,
			text=black,draw=gray!40,align=center]
			\tikzstyle{every edge}=[draw=gray,very thick]
			\tikzstyle{diaState}{gray} = [every state,bottom color=#1!40,top color=white!80!#1!40]
			%  red , cyan , blue , green , 
			%  orange , yellow , magenta , 
			%  purple , brown , violet and teal
			
			\node[diaState=red]  (a)  {Center};
			\node[diaState=cyan]  (b)    [right of=a]{Right};
			\node[diaState=blue]  (c)  [left of=a]{Left};
			\node[diaState=green]  (d)   [below of=a]{below};
			\node[diaState=orange]	(e)	[above of=a]{above};
			\path 	(a)	edge node[above]{edge} node[below]{e2} 	(b)
						edge	(c)
						edge	(d)
						edge	(e);
		\end{tikzpicture}
	\end{generalfig}
	
	附录中的表格：
	\begin{generaltab}{LaTeX Table Generator}{tab:LatexTableGenerator}
		\begin{tabularx}{\textwidth}{CCCCC}
			\toprule
			a & s & d     & f     & g    \\
			\midrule
			3 &   &       &       &      \\
			t &   & 	  &		  &		 \\
			\bottomrule
		\end{tabularx}
	\end{generaltab}

\end{appendices}
\end{document}
